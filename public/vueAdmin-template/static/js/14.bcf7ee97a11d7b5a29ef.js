webpackJsonp([14],{jfn6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("W+FH"),a=i("zL8q"),o=i("TIfe"),n={data:function(){return{showImg:"",listQuery:{name:"",del:"",page:1,limit:20},form:{id:"",attr_name:"",un_number:"",attr_type:"0",attr_option_values:[{option:""}]},add:{uploadUrl:""},parent:[],list:null,listLoading:!0,Controller:"",textMap:{update:"修改",create:"添加"},dialogVisible:!1,dialogdel:!1,dialogTitle:"",delId:0,options:[{value:0,label:"未禁用"},{value:1,label:"禁用"},{value:2,label:"全部"}],del:{type:null,title:"",content:"",url:""},pageSizes:[10,20,50,100],page:{currentPage:1,pageSize:10,total:1}}},created:function(){this.add.uploadUrl="http://www.szxzsyx.com/brand/upload?token="+Object(o.a)(),this.dialogVisible=!1,this.fetchData(),this.page.pageSize=10},methods:{addOption:function(){this.form.attr_option_values.push({option:""})},getImage:function(t){return"http://www.szxzsyx.com"+t},handleAvatarSuccess:function(t,e){this.form.logo="/app/uploadImage/"+t.path,this.showImg="http://www.szxzsyx.com"+this.form.logo},fetchData:function(){var t=this;this.listLoading=!0,this.listQuery.page=this.page.currentPage,this.listQuery.limit=this.page.pageSize,Object(l.e)(this.listQuery,"/attribute/list").then(function(e){t.list=e.list;for(var i=0;i<t.list.length;i++)null==t.list[i].attr_option_values[0]&&(t.list[i].attr_option_values[0]="");t.Controller=e.controller.toLowerCase(),t.page.total=e.count,t.listLoading=!1})},break:function(){this.id="",this.form.attr_name="",this.form.un_number="",this.form.attr_type="",this.form.attr_option_values=[{option:""}]},handleCreate:function(){this.break(),this.dialogVisible=!0,this.dialogTitle=this.textMap.create},handleUpdate:function(t){this.break(),this.showImg="http://www.szxzsyx.com"+this.form.logo,this.form.id=t.id,this.form.un_number=t.un_number,this.form.attr_name=t.attr_name,this.form.attr_type=t.attr_type,this.form.attr_option_values=t.attr_option_values,this.dialogVisible=!0,this.dialogTitle=this.textMap.update},create:function(){var t=this;this.listLoading=!0,Object(l.b)(this.form,"/"+this.Controller+"/add").then(function(e){t.dialogVisible=!1,t.fetchData()},function(t){console.log(t),Object(a.Message)({message:t.content,type:"error",duration:5e3})}),this.listLoading=!1},update:function(){var t=this;this.listLoading=!0,Object(l.d)(this.form,"/"+this.Controller+"/edit").then(function(e){t.dialogVisible=!1,t.fetchData()},function(t){Object(a.Message)({message:t.content,type:"error",duration:5e3})}),this.listLoading=!1},softDel:function(t){this.dialogdel=!0,this.delId=t.id,this.del.title="禁用",this.del.content="确认禁用吗？",this.del.url="/"+this.Controller+"/softDel"},postDel:function(){var t=this;0===this.i&&Object(a.Message)({message:"错误",type:"error",duration:5e3}),Object(l.c)({id:this.delId},this.del.url).then(function(e){t.dialogdel=!1,t.fetchData()}),this.delId=0},remove:function(t){this.dialogdel=!0,this.delId=t.id,this.del.title="删除",this.del.content="确认删除吗？",this.del.url="/"+this.Controller+"/remove"},recover:function(t){this.dialogdel=!0,this.delId=t.id,this.del.title="恢复",this.del.content="确认恢复吗？",this.del.url="/"+this.Controller+"/recover"},handleSizeChange:function(t){this.page.pageSize=t,this.fetchData()},handleCurrentChange:function(t){this.page.currentPage=t,this.fetchData()},handleClose:function(t){}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"分类名称"},model:{value:t.listQuery.cat_name,callback:function(e){t.$set(t.listQuery,"cat_name",e)},expression:"listQuery.cat_name"}}),t._v(" "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.del,callback:function(e){t.$set(t.listQuery,"del",e)},expression:"listQuery.del"}},t._l(t.options,function(t){return i("el-option",{attrs:{label:t.label,value:t.value}})})),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v("下载")]),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,"label-width":"80px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"85px"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"id"}},[i("el-input",{model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"属性名称"}},[i("el-input",{model:{value:t.form.attr_name,callback:function(e){t.$set(t.form,"attr_name",e)},expression:"form.attr_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"属性排序"}},[i("el-input",{model:{value:t.form.un_number,callback:function(e){t.$set(t.form,"un_number",e)},expression:"form.un_number"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"属性类型"}},[i("el-radio-group",{model:{value:t.form.attr_type,callback:function(e){t.$set(t.form,"attr_type",e)},expression:"form.attr_type"}},[i("el-radio",{attrs:{label:0}},[t._v("唯一属性")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("可选属性")])],1)],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.form.attr_type,expression:"form.attr_type==1"}],attrs:{label:"属性选项"}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span"),t._v(" "),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.addOption}},[t._v("添加选项")])],1),t._v(" "),t._l(t.form.attr_option_values,function(e,l){return i("div",{staticClass:"text item"},[i("span",{attrs:{span:6}},[t._v("\n                选项 "+t._s(l+1)+"：\n              ")]),t._v(" "),i("el-input",{attrs:{span:18},model:{value:e.option,callback:function(i){t.$set(e,"option",i)},expression:"item1.option"}})],1)})],2)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),"添加"==t.dialogTitle?i("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v(t._s(t.dialogTitle))]):i("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v(t._s(t.dialogTitle))])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"属性名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.attr_name)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"属性排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.un_number)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"属性选项"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.attr_option_values?i("div",t._l(e.row.attr_option_values,function(e){return i("span",[t._v(" "+t._s(e.option)+",")])})):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.created_at)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"跟新时间",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.updated_at)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.deleted_at?t._e():i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.handleUpdate(e.row)}}},[t._v("修改")]),t._v(" "),e.row.deleted_at?t._e():i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(i){t.softDel(e.row)}}},[t._v("禁用")]),t._v(" "),e.row.deleted_at?i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){t.recover(e.row)}}},[t._v("恢复")]):t._e(),t._v(" "),e.row.deleted_at?i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.remove(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"block",staticStyle:{"padding-left":"25px","padding-top":"15px"}},[i("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","popper-class":"页","current-page":t.page.currentPage,"page-sizes":t.pageSizes,"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.del.title,visible:t.dialogdel,width:"30%"},on:{"update:visible":function(e){t.dialogdel=e}}},[i("span",[t._v(t._s(t.del.content))]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogdel=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.postDel}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},r=i("VU/8")(n,s,!1,null,null,null);e.default=r.exports}});